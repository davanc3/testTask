Проблемы кода, представленного в 3 задании:
1) создании лишних переменных, когда массивы можно передать в GetList 
параметрами сразу, не создавая лишних переменных
2) промежуточная переменная $brands абсолютно не нужна, так как можно 
сохранять результаты сразу в $arResult["BRANDS"]
3) Вообще логика вывода брендов не должна так инлайново ставится в index.php,
так как он может редактироваться контент менеджером и он случайно может
сломать код. Данная логика должна быть зашита в компоненте, а в index.php
должен распологаться только вызов этого компонента
4) Можно ограничить select данных, указав в $arSelect параметр 'PROPERTY_BRAND'. 
Запрос из БД будет меньше.
5) Переменная $fields не используется и не понятно зачем она вообще объявлена.